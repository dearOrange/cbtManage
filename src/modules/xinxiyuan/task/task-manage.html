<div class="dataContent">
  <div class="search-container">
    <form id="task-manage-form">
      <table class="common_query textLeft search-content">
        <tbody>
          <tr class="new-style">
            <td colspan="2">
              <label class="label">车&nbsp;牌&nbsp;号&nbsp;：</label>
              <input type="text" class="search-input" name="carNumber">
            </td>
            <td colspan="2">
              <label class="label">债权方名称：</label>
              <input type="text" class="search-input" name="companyName">
            </td>
            <td colspan="2">
              <label class="label">残&nbsp;&nbsp;&nbsp;值：</label>
              <input type="text" class="search-input OnlyPrice begin-input" id="minprice" name="minprice"> 至
              <input type="text" class="search-input OnlyPrice public_price end-input" id="maxprice" name="maxprice">
            </td>
            <td class="successTask">
              <label class="label">任务类型：</label>
              <select name="entrust">
                <option value="">全部</option>
                <option value="all">无需定位需找+拖</option>
                <option value="trace">无定位只需找车</option>
                <option value="recycle">有定位只需拖车</option>
              </select>
            </td>
          </tr>
          <tr class="new-style">
            <td colspan="2">
              <label class="label">品&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;牌&nbsp;：</label>
              <input type="text" class="search-input" name="carBrand">
            </td>
            <td colspan="2">
              <label class="label">违章地区：</label>
              <input type="text" class="search-input" name="city">
            </td>
            <td colspan="2">
              <label class="label">发布时间：</label>
              <input type="text" class="search-input hand begin-input" readonly="readonly" name="beginTime" id="beginTime" onclick="WdatePicker({maxDate:'#F{$dp.$D(\'endTime\')}',dateFmt:'yyyy-MM-dd',isShowClear:true})"> 至
              <input type="text" class="search-input hand end-input" readonly="readonly" name="endTime" id="endTime" onclick="WdatePicker({minDate:'#F{$dp.$D(\'beginTime\')}',dateFmt:'yyyy-MM-dd',isShowClear:true})">
            </td>
            <td style="text-align: center;">
              <input type="submit" value="查询" class="button search-button">
            </td>
          </tr>
        </tbody>
        <tbody>
          <tr class="new-style">
            <td colspan="7">
              <ol id="taskOccurAt" class="ol_change">
                <li>违章地区：</li>
                <li data-value="" class="occurAtState occurAtActive">全部</li>
                <li data-value="7" class="occurAtState">一周内</li>
                <li data-value="30" class="occurAtState">一月内</li>
                <li data-value="90" class="occurAtState">三月内</li>
                <li data-value="185" class="occurAtState">半年内</li>
                <li data-value="365" class="occurAtState">一年内</li>
              </ol>
            </td>
          </tr>
        </tbody>
        <tbody>
          <tr class="new-style">
            <td colspan="7">
              <ol id="taskCanExecute" class="ol_change">
                <li>违章地区：</li>
                <li data-value="" class="occurAtState occurAtActive">全部</li>
                <li data-value="1" class="occurAtState">可执行</li>
                <li data-value="0" class="occurAtState">不可执行</li>
              </ol>
            </td>
          </tr>
        </tbody>
        <tbody>
          <tr class="new-style">
            <td colspan="7">
              <ol id="taskState" class="all_state_change">
                <li>状态：</li>
                <li data-value="" data-state="all" class="occurAtState occurAtStateAll occurAtActive">全部</li>
                <li data-value="new" data-state="new" class="occurAtState">待审核</li>
                <li data-value="undistributed" data-state="undistributed" class="occurAtState">待分发</li>
                <li data-value="unarrange" data-state="unarrange" class="occurAtState">待分配</li>
                <li data-value="tracing" data-state="tracing" class="occurAtState">查找中</li>
                <li data-value="clueChecking" data-state="clueChecking" class="occurAtState">已发现</li>
                <li data-value="unvaluation" data-state="unvaluation" class="occurAtState">待估价</li>
                <li data-value="unconfirmed" data-state="unconfirmed" class="occurAtState">待出委托</li>
                <li data-value="voucherChecking" data-state="voucherChecking" class="occurAtState">凭证审核中</li>
                <li data-value="hunterUnreceive" data-state="hunterUnreceive" class="occurAtState">捕头待确认</li>
                <li data-value="hunterReceive" data-state="hunterReceive" class="occurAtState">捕头已确认</li>
                <li data-value="platReceive" data-state="platReceive" class="occurAtState">平台已收车</li>
                <li data-value="upstreamReceive" data-state="upstreamReceive" class="occurAtState">已完成</li>
                <li data-value="closed" data-state="closed" class="occurAtState">已关闭</li>
              </ol>
            </td>
          </tr>
        </tbody>
        <tbody>
          <tr id="batchOperater" class="successTask">
            <td colspan="7">
              <a class="button search-button" href="javascript:;" id="allrepair">信息修复</a>
              <a class="button search-button" href="javascript:;" id="taskDistribution">任务分配</a>
              <a class="button search-button" href="javascript:;" id="closeTaskDistribute">任务关闭</a>
            </td>
          </tr>
        </tbody>
      </table>
    </form>
  </div>
  <div class="data-container">
    <table class="dataShow">
      <thead>
        <tr>
          <th width="3%">
            <input type="checkbox" id="checkAll" />
          </th>
          <th width="4%">序号</th>
          <th width="6%">车牌号</th>
          <th width="6%">品牌</th>
          <th width="8%">债权方</th>
          <th width="10%">发布时间</th>
          <th width="8%">商务经理</th>
          <th width="8%">渠道经理</th>
          <th width="6%">状态</th>
          <th width="6%">残值</th>
          <th width="8%">任务类型</th>
          <th width="6%">违章地区</th>
          <th width="10%">违章时间</th>
          <th width="6%">保险</th>
          <th width="6%">参与匹配</th>
          <th width="6">操作</th>
        </tr>
      </thead>
      <tbody id="task-manage-container"></tbody>
    </table>
    <div class="page-box pagination" id="page_container"></div>
  </div>
</div>
<script type="text/template" id="task-manage-template">
  {{ each list item index }}
  <tr class="{{if item.state === 'clueChecking'}}isYellow{{/if}}{{if item.state === 'unvaluation'}}isRed{{/if}}{{if item.state === 'closed'}}isGrey{{/if}}">
    <td>
      <input type="checkbox" value="{{item.id}}" class="checkOne" data-id="{{item.id}}"/>
    </td>
    <td class="remark_position">{{index+1}}<p class="isOptionRemark"></p><span id="span_remark">{{if item.canExecute == '0'}}任{{else}}执{{/if}}</span></td>
    <td>{{item.carNumber}}</td>
    <td>{{item.carBrand}}</td>
    <td>{{item.upstreamName}}</td>
    <td>{{item.createAt}}</td>
    <td>{{item.businessManager}}</td>
    <td>{{item.channelManager}}</td>
    <td>{{menuState(item.state)}}</td>
    <td>{{item.carPrice}}</td>
    <td>{{menuState(item.entrust)}}</td>
    <td>{{item.city}}</td>
    <td>{{item.occurAt}}</td>
    <td>{{item.insurer}}</td>
    <td>{{if item.status == '1'}}是{{else}}否{{/if}}</td>
    <td>
      <a data-id="{{item.id}}" data-car="{{item.carNumber}}" class="detail button">详情</a>
    </td>
  </tr>
  {{/each}}
</script>
<script type="text/template" id="searchIllegalInfo-template">
  <div>
    <table>
      <thead>
        <th>序号</th>
        <th>信息描述</th>
        <th>违章地点</th>
        <th>违章城市</th>
        <th>发生时间</th>
      </thead>
      <tbody id="search-illegalList-container">
        {{each list item index}}
        <tr>
          <td>{{index+1}}</td>
          <td>{{item.desc}}</td>
          <td>{{item.site}}</td>
          <td>{{item.city}}</td>
          <td>{{item.occurAt}}</td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
</script>
<script type="text/javascript">
seajs.use('modules/xinxiyuan/task/task-manage', function(TaskManage) {
  var TaskManage = new TaskManage();
  TaskManage.init();
});
</script>