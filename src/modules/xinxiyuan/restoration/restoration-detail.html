<div class="dataContent restorationContent">
	
</div>
<script type="text/template" id="restoration_detail_template">
    <div class="dialog-width public_css">
        <p class="pull-left">
            任务详情
        </p>
        <a href="javascript:;" class="button gobackPage goBack">返回</a>
        <p class="showTaskState pull-right">{{menuState(data.state)}}</p>
        <div class="clearfix"></div>
        <hr /><br />
        <p>基本信息</p><br />
        
        <ul>
            <li>任务号：{{data.taskNo}}</li>
            <li>任务类型：{{menuState(data.entrust)}}</li>
            <li>任务发起：{{data.upstreamName}}</li>
            <li>车牌号：{{data.carNumber}}</li>
            <li>车型：{{data.carBrand}}-{{data.carSeries}}-{{data.carModel}}</li>
            <li>颜色：{{data.carColor}}</li>
            <li>车辆识别号：{{data.carId}}</li>
            <li>车辆发动机号：{{data.engineId}}</li>
            <li>任务发布时间：{{data.createAt}}</li>
        </ul>
        <div class="remark">{{data.remark}}</div>
        <div class="imgRecord">
            {{each data.attachmentVoList item index}}
            <img src="{{viewImgRoot}}{{item.url}}?imageMogr2/auto-orient/thumbnail/100x100" alt="图片" onerror="this.src='/src/img/nopic.png'"/>
            {{/each}}
        </div>
        <div class="mainfile">
        	<p>线索信息</p>
        	{{ each data.traceVoList item index }}
        	<div class="upimg">
        		<dl>
					<dt>
						<div class="upfile-item">
							<img data-id="{{item.carPhoto}}" src="{{viewImgRoot}}{{item.carPhoto}}?imageMogr2/auto-orient/thumbnail/100x100">
						</div>
	    			</dt>
					<dd>全车背景照</dd>
				</dl>
        	</div>
        	<div style="margin:10px 0;">线索上传时间：{{item.createAt}}</div>
        	{{/each}}
        </div>
        <form id="restoration-detail-form">
            <input type="hidden" name="taskId" id="taskId" value="">
            <div class="hopeprice">
                {{if data.state == 'unvaluation'}}
                <p>预估费用</p>
                <div>
                    <label>车辆残值估算:</label>
                    {{if data.estimatedMaxPrice && data.estimatedMinPrice}}
                    <span>{{data.carPrice}}</span>
                    {{else}}
                    <input type="text" name="carPrice" maxlength="11" class="OnlyPrice" required="" id="salvage"/>
                    {{/if}}
                </div>
                <div>
                    <label>处置费用估算:</label>
                    {{if data.estimatedMaxPrice && data.estimatedMinPrice}}
                    <span>{{data.estimatedMinPrice}}至</span><span>{{data.estimatedMaxPrice}}</span>
                    {{else}}
                    <input type="text" maxlength="11" class="OnlyPrice" name="estimatedMinPrice" required="" id="minMoney" value="" />至<input type="text" name="estimatedMaxPrice" required="" class="OnlyPrice" maxlength="11" id="maxMoney" value=""/>
                    {{/if}}
                </div>
                {{if data.estimatedMaxPrice && data.estimatedMinPrice}}
                <p>确认费用</p>
                <div>
                    <label>最终处置费用:</label>
                    <input type="text require" name="finalPrice" maxlength="11" class="OnlyPrice" id="finalPrice" value="" required="" />
                </div>
                <div>
                    <label>其中受托人费用:</label>
                    <input type="text require" name="baileePrice" maxlength="11" class="OnlyPrice" id="baileePrice" value="" required="" />
                </div>
                <div>
                    <label>资产查找费:</label>
                    <input type="text require" name="assetPrice" maxlength="11" class="OnlyPrice" id="assetPrice" value="" required="" />
                </div>
                <div>
                    <label>第三方处置清收费:</label>
                    <input type="text require" name="thirdpartyPrice" maxlength="11" class="OnlyPrice" id="thirdpartyPrice" value="" required="" />
                </div>
                <input type="submit" value="确认" class="button search-button surePrice" style="margin-bottom:40px;width:150px;height:30px;">
                {{else}}
                <input type="submit" value="预估" class="button search-button priceStorage" style="margin-bottom:40px;width:150px;height:30px;">
                {{/if}}
                {{/if}}

                {{if data.state == 'unconfirmed'}}
                <p>预估费用</p>
                <div>
                    <label>车辆残值估算:</label>
                    <span>{{data.finalPrice}}</span>
                </div>
                <div>
                    <label>处置费用估算:</label>
                    <span>{{data.estimatedMinPrice}}至</span><span>{{data.estimatedMaxPrice}}</span>
                </div>
                <p>确认费用</p>
                <div>
                    <label>最终处置费用:</label>
                    <input type="text require" name="finalPrice" maxlength="11" class="OnlyPrice" id="finalPrice" value="{{data.finalPrice}}" required="" />
                </div>
                <div>
                    <label>其中受托人费用:</label>
                    <input type="text require" name="baileePrice" maxlength="11" class="OnlyPrice" id="baileePrice" value="{{if data.finalPrice}}{{baileePrice}}{{/if}}" required="" />
                </div>
                <div>
                    <label>资产查找费:</label>
                    <input type="text require" name="assetPrice" maxlength="11" class="OnlyPrice" id="assetPrice" value="{{data.assetPrice}}" required="" />
                </div>
                <div>
                    <label>第三方处置清收费:</label>
                    <input type="text require" name="thirdpartyPrice" maxlength="11" class="OnlyPrice" id="thirdpartyPrice" value="{{data.thirdpartyPrice}}" required="" />
                </div>
                <input type="submit" value="确认" class="button search-button surePrice" style="margin-bottom:40px;width:150px;height:30px;">
                {{/if}}
            </div>
        </form>
    </div>
</script>
<script type="text/javascript">
seajs.use('modules/xinxiyuan/restoration/restoration-detail', function(RestorationDetail) {
    var RestorationDetail = new RestorationDetail();
    RestorationDetail.init();
});
</script>
